<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Aetherstein Shop Admin – Magische Artefakte verwalten</title>
    <link rel="stylesheet" href="style.css"/>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&display=swap" rel="stylesheet"/>
    <link rel="icon" href="favicon.png" type="image/png" sizes="32x32">
    <link rel="icon" href="https://raw.githubusercontent.com/Aetherstein/Aetherstein-Website/main/favicon.png" type="image/png" sizes="32x32">
    <style>
        .shop-container {
            max-width: 1200px;
            margin: 80px auto 20px;
            padding: 20px;
            color: white;
        }
        
        .admin-panel {
            background: rgba(0, 20, 40, 0.9);
            border: 2px solid #00ffff;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 40px;
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.3);
        }
        
        .admin-panel h2 {
            font-family: 'Cinzel', serif;
            color: #00ffff;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #00ffff;
            font-family: 'Cinzel', serif;
        }
        
        .form-group input, .form-group textarea {
            width: 100%;
            padding: 12px;
            background: rgba(0, 0, 0, 0.7);
            border: 2px solid rgba(0, 255, 255, 0.3);
            border-radius: 8px;
            color: white;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        .form-group input:focus, .form-group textarea:focus {
            outline: none;
            border-color: #00ffff;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
        }
        
        .btn-admin {
            background: linear-gradient(45deg, #001f3f, #003d7a);
            border: 2px solid #00ffff;
            color: white;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'Cinzel', serif;
            font-size: 16px;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        
        .btn-admin:hover {
            background: linear-gradient(45deg, #003d7a, #005fa3);
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.4);
            transform: translateY(-2px);
        }
        
        .btn-danger {
            background: linear-gradient(45deg, #4a0000, #8b0000);
            border-color: #ff4444;
        }
        
        .btn-danger:hover {
            background: linear-gradient(45deg, #8b0000, #cc0000);
            box-shadow: 0 0 20px rgba(255, 68, 68, 0.4);
        }
        
        .btn-export {
            background: linear-gradient(45deg, #4a6600, #6b9900);
            border-color: #88ff00;
        }
        
        .btn-export:hover {
            background: linear-gradient(45deg, #6b9900, #99cc00);
            box-shadow: 0 0 20px rgba(136, 255, 0, 0.4);
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }
        
        .product-card {
            background: rgba(0, 20, 40, 0.9);
            border: 2px solid rgba(0, 255, 255, 0.3);
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 40px rgba(0, 255, 255, 0.2);
            border-color: #00ffff;
        }
        
        .product-image {
            width: 100%;
            height: 250px;
            object-fit: cover;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(255, 255, 255, 0.5);
            font-family: 'Cinzel', serif;
        }
        
        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .product-content {
            padding: 25px;
        }
        
        .product-title {
            font-family: 'Cinzel', serif;
            color: #00ffff;
            font-size: 1.5em;
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
        }
        
        .product-price {
            color: #ffff00;
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .product-description {
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.6;
            margin-bottom: 20px;
        }
        
        .product-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
        }
        
        .modal-content {
            background: rgba(0, 20, 40, 0.95);
            border: 2px solid #00ffff;
            border-radius: 15px;
            margin: 5% auto;
            padding: 30px;
            width: 90%;
            max-width: 600px;
            position: relative;
            box-shadow: 0 0 50px rgba(0, 255, 255, 0.3);
        }
        
        .close {
            color: #00ffff;
            float: right;
            font-size: 35px;
            font-weight: bold;
            cursor: pointer;
            position: absolute;
            right: 20px;
            top: 15px;
        }
        
        .close:hover {
            text-shadow: 0 0 15px rgba(0, 255, 255, 0.8);
        }
        
        .export-section {
            background: rgba(0, 40, 20, 0.9);
            border: 2px solid #88ff00;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 0 20px rgba(136, 255, 0, 0.2);
        }
        
        .export-section h3 {
            color: #88ff00;
            font-family: 'Cinzel', serif;
            margin-bottom: 15px;
        }
        
        .json-output {
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(136, 255, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            color: #88ff00;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
            margin: 15px 0;
            white-space: pre-wrap;
        }
        
        @media (max-width: 768px) {
            .shop-container {
                padding: 10px;
                margin-top: 60px;
            }
            
            .admin-panel {
                padding: 20px;
            }
            
            .products-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body style="opacity: 0; transition: opacity 0.5s ease;" onload="document.body.style.opacity = 1;">
<nav style="position: fixed; top: 0; left: 0; width: 100%; background: rgba(0,0,0,0.8); padding: 10px 0; text-align: center; z-index: 999;">
  <a href="index.html" style="color: white; margin: 0 20px; text-decoration: none;">Home</a>
  <a href="about.html" style="color: white; margin: 0 20px; text-decoration: none;">About</a>
  <a href="kontakt.html" style="color: white; margin: 0 20px; text-decoration: none;">Kontakt</a>
  <a href="forum.html" style="color: white; margin: 0 20px; text-decoration: none;">Forum</a>
  <a href="shop.html" style="color: white; margin: 0 20px; text-decoration: none;">Shop</a>
  <a href="#" style="color: #ff4444; margin: 0 20px; text-decoration: none;">Admin</a>
</nav>

<div class="shop-container">
    <!-- Export Section -->
    <div class="export-section">
        <h3>📦 JSON Export für GitHub</h3>
        <p style="color: rgba(255,255,255,0.8); margin-bottom: 15px;">
            Klicke auf "JSON generieren" um die Produktdaten zu exportieren. 
            Kopiere den Code und speichere ihn als <strong>products.json</strong> in deinem GitHub Repository.
        </p>
        <button class="btn-admin btn-export" onclick="generateJSON()">JSON generieren</button>
        <button class="btn-admin" onclick="copyJSON()" id="copyBtn" style="display: none;">JSON kopieren</button>
        <div id="jsonOutput" class="json-output" style="display: none;"></div>
    </div>

    <!-- Admin Panel -->
    <div class="admin-panel">
        <h2>🔮 Magische Artefakte Verwaltung</h2>
        <form id="productForm">
            <div class="form-group">
                <label for="productTitle">Artefakt Name:</label>
                <input type="text" id="productTitle" required placeholder="z.B. Kristall der Ewigkeit">
            </div>
            
            <div class="form-group">
                <label for="productPrice">Preis (in Aethersteinen):</label>
                <input type="text" id="productPrice" required placeholder="z.B. 150 Aethersteine">
            </div>
            
            <div class="form-group">
                <label for="productImage">Bild URL:</label>
                <input type="url" id="productImage" placeholder="https://beispiel.com/bild.jpg">
            </div>
            
            <div class="form-group">
                <label for="productDescription">Beschreibung:</label>
                <textarea id="productDescription" rows="4" placeholder="Beschreibe die magischen Eigenschaften dieses Artefakts..."></textarea>
            </div>
            
            <button type="submit" class="btn-admin">✨ Artefakt hinzufügen</button>
            <button type="button" class="btn-admin btn-danger" onclick="clearAllProducts()">🗑️ Alle Artefakte löschen</button>
        </form>
    </div>
    
    <!-- Products Display -->
    <div class="products-grid" id="productsGrid">
        <!-- Products will be dynamically added here -->
    </div>
</div>

<!-- Edit Modal -->
<div id="editModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeEditModal()">&times;</span>
        <h2 style="color: #00ffff; font-family: 'Cinzel', serif; margin-bottom: 20px;">🔧 Artefakt bearbeiten</h2>
        <form id="editForm">
            <input type="hidden" id="editProductId">
            <div class="form-group">
                <label for="editTitle">Name:</label>
                <input type="text" id="editTitle" required>
            </div>
            <div class="form-group">
                <label for="editPrice">Preis:</label>
                <input type="text" id="editPrice" required>
            </div>
            <div class="form-group">
                <label for="editImage">Bild URL:</label>
                <input type="url" id="editImage">
            </div>
            <div class="form-group">
                <label for="editDescription">Beschreibung:</label>
                <textarea id="editDescription" rows="4"></textarea>
            </div>
            <button type="submit" class="btn-admin">💾 Änderungen speichern</button>
        </form>
    </div>
</div>

<footer style="margin-top: 60px; text-align: center; padding: 20px; color: rgba(255,255,255,0.7);">
    <p>© 2025 Aetherstein Serverprojekt - Admin Panel</p>
</footer>

<!-- Cursor Glow -->
<div id="cursor-glow" style="
  position: fixed;
  width: 35px;
  height: 35px;
  background: radial-gradient(circle, rgba(0, 255, 255, 0.2) 0%, transparent 70%);
  border-radius: 50%;
  pointer-events: none;
  mix-blend-mode: screen;
  transform: translate(-50%, -50%);
  z-index: 9999;
"></div>

<script>
// Mouse Glow Effect
document.addEventListener("mousemove", function(e) {
  const glow = document.getElementById("cursor-glow");
  glow.style.left = e.clientX + "px";
  glow.style.top = e.clientY + "px";
});

// Navigation Fade Effect
document.querySelectorAll('nav a').forEach(link => {
  link.addEventListener('click', function (e) {
    if (this.getAttribute('href').includes('.html')) {
      e.preventDefault();
      const target = this.getAttribute('href');
      document.body.classList.add('fade-out');
      setTimeout(() => {
        window.location.href = target;
      }, 500);
    }
  });
});

// Products Management
let products = [];
let editingProductId = null;

// Load products from localStorage
function loadProducts() {
    const savedProducts = localStorage.getItem('aetherstein_admin_products');
    if (savedProducts) {
        products = JSON.parse(savedProducts);
        displayProducts();
    }
}

// Save products to localStorage
function saveProducts() {
    localStorage.setItem('aetherstein_admin_products', JSON.stringify(products));
}

// Generate unique ID
function generateId() {
    return 'product_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
}

// Add new product
document.getElementById('productForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const product = {
        id: generateId(),
        title: document.getElementById('productTitle').value,
        price: document.getElementById('productPrice').value,
        image: document.getElementById('productImage').value,
        description: document.getElementById('productDescription').value,
        dateAdded: new Date().toISOString()
    };
    
    products.push(product);
    saveProducts();
    displayProducts();
    
    // Clear form
    this.reset();
    
    // Success feedback
    showNotification('✨ Artefakt erfolgreich hinzugefügt!', 'success');
});

// Display all products
function displayProducts() {
    const grid = document.getElementById('productsGrid');
    
    if (products.length === 0) {
        grid.innerHTML = `
            <div style="grid-column: 1/-1; text-align: center; color: rgba(255,255,255,0.7); font-family: 'Cinzel', serif; font-size: 1.5em; padding: 60px;">
                🏺 Noch keine Artefakte im Shop vorhanden.<br>
                Füge dein erstes magisches Artefakt hinzu!
            </div>
        `;
        return;
    }
    
    grid.innerHTML = products.map(product => `
        <div class="product-card">
            <div class="product-image">
                ${product.image ? 
                    `<img src="${product.image}" alt="${product.title}" onerror="this.parentElement.innerHTML='<div style=\\'color: rgba(255,255,255,0.5); font-family: Cinzel, serif;\\'>🖼️ Bild nicht verfügbar</div>'">` : 
                    '<div>🏺 Kein Bild</div>'
                }
            </div>
            <div class="product-content">
                <h3 class="product-title">${product.title}</h3>
                <div class="product-price">${product.price}</div>
                <p class="product-description">${product.description || 'Keine Beschreibung verfügbar'}</p>
                <div class="product-actions">
                    <button class="btn-admin" onclick="editProduct('${product.id}')">✏️ Bearbeiten</button>
                    <button class="btn-admin btn-danger" onclick="deleteProduct('${product.id}')">🗑️ Löschen</button>
                </div>
            </div>
        </div>
    `).join('');
}

// Delete product
function deleteProduct(id) {
    if (confirm('🗑️ Möchtest du dieses Artefakt wirklich aus dem Shop entfernen?')) {
        products = products.filter(product => product.id !== id);
        saveProducts();
        displayProducts();
        showNotification('🗑️ Artefakt wurde entfernt!', 'success');
    }
}

// Edit product
function editProduct(id) {
    const product = products.find(p => p.id === id);
    if (!product) return;
    
    editingProductId = id;
    document.getElementById('editProductId').value = id;
    document.getElementById('editTitle').value = product.title;
    document.getElementById('editPrice').value = product.price;
    document.getElementById('editImage').value = product.image || '';
    document.getElementById('editDescription').value = product.description || '';
    
    document.getElementById('editModal').style.display = 'block';
}

// Close edit modal
function closeEditModal() {
    document.getElementById('editModal').style.display = 'none';
    editingProductId = null;
}

// Save edited product
document.getElementById('editForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const productIndex = products.findIndex(p => p.id === editingProductId);
    if (productIndex === -1) return;
    
    products[productIndex] = {
        ...products[productIndex],
        title: document.getElementById('editTitle').value,
        price: document.getElementById('editPrice').value,
        image: document.getElementById('editImage').value,
        description: document.getElementById('editDescription').value,
        lastModified: new Date().toISOString()
    };
    
    saveProducts();
    displayProducts();
    closeEditModal();
    showNotification('💾 Artefakt wurde aktualisiert!', 'success');
});

// Clear all products
function clearAllProducts() {
    if (confirm('🗑️ Möchtest du wirklich ALLE Artefakte aus dem Shop entfernen? Diese Aktion kann nicht rückgängig gemacht werden!')) {
        products = [];
        saveProducts();
        displayProducts();
        document.getElementById('jsonOutput').style.display = 'none';
        document.getElementById('copyBtn').style.display = 'none';
        showNotification('🗑️ Alle Artefakte wurden entfernt!', 'success');
    }
}

// Generate JSON for GitHub
function generateJSON() {
    if (products.length === 0) {
        showNotification('⚠️ Keine Produkte vorhanden! Füge erst Artefakte hinzu.', 'warning');
        return;
    }
    
    const jsonData = {
        lastUpdated: new Date().toISOString(),
        totalProducts: products.length,
        products: products.map(product => ({
            id: product.id,
            title: product.title,
            price: product.price,
            image: product.image || '',
            description: product.description || '',
            dateAdded: product.dateAdded || new Date().toISOString()
        }))
    };
    
    const jsonString = JSON.stringify(jsonData, null, 2);
    document.getElementById('jsonOutput').textContent = jsonString;
    document.getElementById('jsonOutput').style.display = 'block';
    document.getElementById('copyBtn').style.display = 'inline-block';
    
    showNotification('📦 JSON wurde generiert! Kopiere es und speichere es als products.json', 'success');
}

// Copy JSON to clipboard
function copyJSON() {
    const jsonText = document.getElementById('jsonOutput').textContent;
    navigator.clipboard.writeText(jsonText).then(function() {
        showNotification('📋 JSON wurde in die Zwischenablage kopiert!', 'success');
    }).catch(function() {
        // Fallback for older browsers
        const textArea = document.createElement('textarea');
        textArea.value = jsonText;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        showNotification('📋 JSON wurde kopiert!', 'success');
    });
}

// Notification system
function showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    const colors = {
        success: { bg: 'rgba(0, 100, 0, 0.9)', border: '#00ff00', shadow: '0, 255, 0' },
        warning: { bg: 'rgba(100, 100, 0, 0.9)', border: '#ffff00', shadow: '255, 255, 0' },
        info: { bg: 'rgba(0, 50, 100, 0.9)', border: '#00ffff', shadow: '0, 255, 255' }
    };
    
    const color = colors[type] || colors.info;
    
    notification.style.cssText = `
        position: fixed;
        top: 80px;
        right: 20px;
        background: ${color.bg};
        color: white;
        padding: 15px 25px;
        border-radius: 8px;
        border: 2px solid ${color.border};
        font-family: 'Cinzel', serif;
        z-index: 10001;
        box-shadow: 0 0 20px rgba(${color.shadow}, 0.3);
        transition: all 0.3s ease;
        max-width: 300px;
    `;
    notification.textContent = message;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.style.opacity = '0';
        notification.style.transform = 'translateX(100%)';
        setTimeout(() => {
            if (document.body.contains(notification)) {
                document.body.removeChild(notification);
            }
        }, 300);
    }, 4000);
}

// Close modal when clicking outside
window.onclick = function(event) {
    const modal = document.getElementById('editModal');
    if (event.target === modal) {
        closeEditModal();
    }
}

// Initialize
loadProducts();

// Prevent back cache issues
window.addEventListener('pageshow', function () {
    document.body.classList.remove('fade-out');
});
</script>
</body>
</html>
